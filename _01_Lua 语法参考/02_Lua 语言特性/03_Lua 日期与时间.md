### Lua 日期与时间

---
- [1. 日期与时间](#1-日期与时间)
	- [1.1 os.time](#11-ostime)
	- [1.2 os.date](#12-osdate)
- [2. 日期和时间处理](#2-日期和时间处理)


---
## 1. 日期与时间

- Lua 针对日期和时间使用两种表示方式，数字（从 ```Jan 01,1970,0:00 UTC``` 开始后的秒数）和表（```date = {year,month,day,hour,min,sec,wday,yday,isdst}）。日期表中不包括时区转换

---
### 1.1 os.time

- 函数 ```os.time(date?:{})``` 无参时以数字形式返回当前日期和时间；传入表时返回当前表中所描述日期和时间对应的数字，其中 year、month、day 字段是必需的，而当日时间默认为 ```12:00:00```

```lua
print(os.time())	--> 1669608000 (11/28/2022, 12:00 UTC)
print(os.time({year = 2022,month = 11,day = 28}))
```

---
### 1.2 os.date

- 函数 ```os.date(format, time?)``` 在一定程度上是函数 ```os.time``` 的反函数，返回一个包含日期及时刻的字符串或表。格式化方法取决于所给字符串 ```format```：```"*t"``` 用于生成一个日期表
- 对于其他格式化字符串，函数 ```os.date``` 将日期格式化为一个字符串：

```lua
%a,%A          -- 周几简写(Wed)，全写(Wednesday)
%b,%B          -- 月份简写(Sep)，全写(September)
%c             -- 日期和时间，(09/12/22 23:01:01)
%d             -- 一个月的第几天，(16)
%H             -- 24小时制的小时数，(23)
%I             -- 12小时制的小时数，(11)
%j             -- 一年中的第几天，(259)
%m             -- 月份
%M             -- 分钟
%p             -- "am" 或 "pm"
%S             -- 秒数
%w             -- 星期(0)	Sunday-Saturday(0-6)
%W             -- 一年的第几周
%x             -- 日期，(09/16/99)
%X             -- 时间，(23:48:10)
%y             -- 表示年份的两位数，(22)，2022
%Y             -- 完整的年份，(2022)
%z             -- 时区，(-0300)
%%             -- 百分号
!%<signal>     -- 表示 os.date 会以 UTC 格式对齐进行解析
```

---
## 2. 日期和时间处理

- 假设从当前时间向后数 40 天的日期

```lua
t = os.date("*t")    -- 获取当前时间
print(os.date("%Y/%m/%d", os.time(t.day + 40)))
```

- 函数 ```os.difftime(t1,t2)``` 用来计算两个时间之间的差值，以秒为单位，可以使用它来计算一段代码的执行时间
- 函数 ```os.clock()``` 具有比秒更高的精度，一般用于返回程序消耗的 CPU 时间

```lua
local x = os.clock()
local s = ""
for i = 1, 100000 do
    s = s .. i
end
print(string.format("elapsed time: %f\n", os.clock() - x))	--> 2.052000
```

---